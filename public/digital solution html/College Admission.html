<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>College Admission</title>

    <link rel="stylesheet" href="../digital solution css/college.css" />
    <link rel="stylesheet" href="../css/popup.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  </head>
  <body>
    <button class="fixed-back-btn" onclick="history.back()">
      <i class="ri-arrow-left-s-line"></i>
    </button>

    <h1 class="title">College Admission</h1>

    <div class="box">
      <div class="left">
        <div class="submit-note highlight-important">
          üìù <strong>Note:</strong> Fill the exact ditails below carefully.
        </div>
        <div class="image-slider">
          <div class="slides">
            <img src="../images/college-img1.png" alt="Slide 1" />
            <img src="../images/college-img2.png" alt="Slide 2" />
            <img src="../images/college-img3.png" alt="Slide 3" />
            <img src="../images/college-img4.png" alt="Slide 4" />
          </div>
        </div>
      </div>

      <div class="card-container">
        <form id="college-admission-form">
          <div class="voter-card">
            <h3>State: West Bengal</h3>

            <label for="district">Select District:</label>
            <select id="district" name="district">
              <option value="">-- Select District --</option>
              <option value="alipurduar">Alipurduar</option>
              <option value="bankura">Bankura</option>
              <option value="birbhum">Birbhum</option>
              <option value="coochbehar">Cooch Behar</option>
              <option value="dakshin_dinajpur">Dakshin Dinajpur</option>
              <option value="darjeeling">Darjeeling</option>
              <option value="hooghly">Hooghly</option>
              <option value="howrah">Howrah</option>
              <option value="jalpaiguri">Jalpaiguri</option>
              <option value="jhargram">Jhargram</option>
              <option value="kalimpong">Kalimpong</option>
              <option value="kolkata">Kolkata</option>
              <option value="malda">Malda</option>
              <option value="murshidabad">Murshidabad</option>
              <option value="nadia">Nadia</option>
              <option value="north_24_parganas">North 24 Parganas</option>
              <option value="paschim_bardhaman">Paschim Bardhaman</option>
              <option value="paschim_medinipur">Paschim Medinipur</option>
              <option value="purba_bardhaman">Purba Bardhaman</option>
              <option value="purba_medinipur">Purba Medinipur</option>
              <option value="purulia">Purulia</option>
              <option value="south_24_parganas">South 24 Parganas</option>
              <option value="uttar_dinajpur">Uttar Dinajpur</option>
            </select>

            <div class="form-section">
              <h2 style="font-size: 18px">Personal Details</h2>

              <p style="color: #555; font-size: 14px; margin-bottom: 10px">
                Enter your name as per your Aadhaar Card
              </p>

              <div class="details-section">
                <label for="full-name">Full Name</label>
                <input
                  type="text"
                  id="personal-full-name"
                  name="full-name"
                  placeholder="Enter Full Name"
                  required
                />
              </div>
            </div>

            <div class="form-section">
              <h2 style="font-size: 18px">Guardian Details</h2>

              <div class="details-section">
                <label for="relation-type">Guardian</label>
                <select id="relation-type" name="relation-type" required>
                  <option value="">-- Select --</option>
                  <option value="father">Father</option>
                  <option value="mother">Mother</option>
                  <option value="husband">Husband</option>
                  <option value="wife">Wife</option>
                  <option value="guardian">
                    Legal Guardian (Orphan / Third Gender)
                  </option>
                </select>

                <label for="guardian-full-name">Full Name</label>
                <input
                  type="text"
                  id="guardian-full-name"
                  name="guardian-full-name"
                  placeholder="Enter Full Name"
                  required
                />
              </div>
            </div>

            <div class="form-section">
              <h2 style="font-size: 18px">Contact Details</h2>

              <p style="color: #555; font-size: 14px; margin-bottom: 10px">
                Provide a valid mobile number and email address.
              </p>

              <div class="details-section">
                <label>Mobile Number</label>
                <div style="margin-bottom: 5px"></div>

                <input
                  type="text"
                  id="mobile-number"
                  name="mobile-number"
                  placeholder="Enter 10-digit Mobile Number"
                  pattern="[0-9]{10}"
                  required
                />

                <label>Email ID</label>
                <div style="margin-bottom: 5px"></div>

                <input
                  type="email"
                  id="email-id"
                  name="email-id"
                  placeholder="Enter Email ID"
                  required
                />
              </div>
            </div>

            <div class="container" style="margin-top: 10px">
              <p style="font-size: 16px; color: #0a3c59; text-align: center">
                Send the following 9 documents via WhatsApp:
              </p>
              <ul style="color: #0a3c59; margin-left: 25px; font-size: 15px">
                <li>Aadhar Card</li>
                <li>Your Signature on white paper</li>
                <li>Passport size photo</li>
                <li>
                  Class 10th Registration, Admit Card, Certificate and Marksheet
                </li>
                <li>
                  Class 12th Registration, Admit Card, Certificate and Marksheet
                </li>
              </ul>

              <div style="text-align: center; margin: 10px 0">
                <a
                  href="https://wa.me/918902709631?text=Hi, I submitted my College Admission request. Sending my documents."
                  target="_blank"
                >
                  <button
                    type="button"
                    style="
                      padding: 10px 25px;
                      background-color: #25d366;
                      color: white;
                      border: none;
                      border-radius: 8px;
                      font-size: 16px;
                      cursor: pointer;
                    "
                  >
                    üì§ Send Documents via WhatsApp
                  </button>
                </a>
              </div>

              <label
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  font-size: 15px;
                  margin-top: 10px;
                "
              >
                <input type="checkbox" id="document-confirm" required />
                I confirm that I have sent all the required documents via
                WhatsApp.
              </label>
            </div>

            <div class="submit-note highlight-important">
              üìû Our team will call you shortly to collect further details.<br />
              Keep your phone turned on and nearby. Thank you!
            </div>

            <div class="submit-container">
              <button type="submit">Submit</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <script src="../js/popup.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDI8FxDlILMR93AD69_E48qwMKJuSUqFXg",
        authDomain: "digital-solutions-ae7ad.firebaseapp.com",
        databaseURL:
          "https://digital-solutions-ae7ad-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "digital-solutions-ae7ad",
        storageBucket: "digital-solutions-ae7ad.appspot.com",
        messagingSenderId: "761041929019",
        appId: "1:761041929019:web:d228c928c6bd40ea4fed1e",
      };

      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();

      document
        .getElementById("college-admission-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const documentConfirmCheckbox =
            document.getElementById("document-confirm");
          const district = document.getElementById("district").value;
          const personalFullName =
            document.getElementById("personal-full-name").value;
          const relationType = document.getElementById("relation-type").value;
          const guardianFullName =
            document.getElementById("guardian-full-name").value;
          const mobileNumber = document.getElementById("mobile-number").value;
          const emailId = document.getElementById("email-id").value;
          const address = document.getElementById("address").value;
          const postOffice = document.getElementById("post-office").value;
          const policeStation = document.getElementById("police-station").value;
          const pinCode = document.getElementById("pin-code").value;
          const place = document.getElementById("place").value;
          const school10th = document.getElementById("school-10th").value;
          const board10th = document.getElementById("board-10th").value;
          const school12th = document.getElementById("school-12th").value;
          const board12th = document.getElementById("board-12th").value;

          if (!documentConfirmCheckbox.checked) {
            alert(
              "‚ùó Please confirm that you have sent all required documents via WhatsApp before submitting."
            );
            return;
          }

          // ** Changes to save data by date **
          const today = new Date().toISOString().split("T")[0]; // yyyy-mm-dd

          const formData = {
            district: district,
            personalDetails: {
              fullName: personalFullName, // Use the new variable here
            },
            guardianDetails: {
              relationType: relationType,
              fullName: guardianFullName, // Use the new variable here
            },
            contactDetails: {
              mobile: mobileNumber,
              email: emailId,
            },
            presentAddress: {
              address: address,
              postOffice: postOffice,
              policeStation: policeStation,
              pinCode: pinCode,
              place: place,
            },
            academicDetails: {
              school10th: school10th,
              board10th: board10th,
              school12th: school12th,
              board12th: board12th,
            },
            timestamp: new Date().toISOString(),
            documentsSent: true,
          };

          database
            .ref("collegeAdmissionRequests/" + today)
            .push(formData)
            .then(() => {
              document.getElementById("college-admission-form").reset();
              documentConfirmCheckbox.checked = false;

              showPopup(
                "‚úÖ Submission Successful",
                "We have received your request. Our team will call you shortly for further process. keep your phone turned on and nearby."
              );
            })
            .catch((error) => {
              alert("‚ùå Error: " + error.message);
            });
        });
    </script>

    <script>
      const slider = document.querySelector(".image-slider");
      const slides = document.querySelector(".slides");
      const images = slides.querySelectorAll("img");

      let currentIndex = 0;
      const totalSlides = images.length;

      // ‚úÖ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ü‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶á‡¶Æ‡ßá‡¶ú ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßá clone ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá (infinite loop effect ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
      const firstClone = images[0].cloneNode(true);
      const lastClone = images[totalSlides - 1].cloneNode(true);

      slides.appendChild(firstClone); // ‡¶∂‡ßá‡¶∑‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ clone
      slides.insertBefore(lastClone, images[0]); // ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶∂‡ßá‡¶∑ clone

      // ‡¶∏‡¶¨ ‡¶á‡¶Æ‡ßá‡¶ú ‡¶Ü‡¶¨‡¶æ‡¶∞ select ‡¶ï‡¶∞‡ßã (clone ‡¶∏‡¶π)
      const allImages = slides.querySelectorAll("img");

      let index = 1; // clone ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶Ü‡¶∏‡¶≤ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá index=1
      const slideWidth = images[0].clientWidth;

      slides.style.transform = `translateX(-${index * slideWidth}px)`;

      function moveToNextSlide() {
        index++;
        slides.style.transition = "transform 0.5s ease-in-out";
        slides.style.transform = `translateX(-${index * slideWidth}px)`;

        // clone ‡¶è ‡¶ó‡ßá‡¶≤‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶∏‡¶≤ ‡¶∏‡ßç‡¶≤‡¶æ‡¶á‡¶°‡ßá jump ‡¶ï‡¶∞‡¶¨‡ßá
        setTimeout(() => {
          if (index === allImages.length - 1) {
            slides.style.transition = "none";
            index = 1; // ‡¶Ü‡¶∏‡¶≤ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶á‡¶Æ‡ßá‡¶ú‡ßá ‡¶´‡¶ø‡¶∞‡¶¨‡ßá
            slides.style.transform = `translateX(-${index * slideWidth}px)`;
          }
        }, 500);
      }

      setInterval(moveToNextSlide, 3000);

      // window resize ‡¶π‡¶≤‡ßá height adjust ‡¶ï‡¶∞‡¶¨‡ßã
      window.addEventListener("resize", () => {
        slider.style.height = allImages[index].clientHeight + "px";
      });

      // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá height set ‡¶ï‡¶∞‡ßã
      slider.style.height = allImages[index].clientHeight + "px";
    </script>
  </body>
</html>
