<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>College Admission</title>

    <link rel="stylesheet" href="../digital solution css/college.css" />
    <link rel="stylesheet" href="../css/popup.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  </head>
  <body>
    <button class="fixed-back-btn" onclick="history.back()">
      <i class="ri-arrow-left-s-line"></i>
    </button>

    <h1 class="title">College Admission</h1>

    <div class="box">
      <div class="left">
        <div class="image-slider">
          <div class="slides">
            <img src="../images/college-img1.png" alt="Slide 1" />
            <img src="../images/college-img2.png" alt="Slide 2" />
            <img src="../images/college-img3.png" alt="Slide 3" />
            <img src="../images/college-img4.png" alt="Slide 4" />
          </div>
        </div>
        <div class="submit-note highlight-important">
          üìù <strong>Note:</strong> Fill the exact ditails below carefully.
        </div>
      </div>

      <div class="right-content">
        <form id="college-admission-form">
          <div class="card">
            <div class="form-section">
              <h2 style="font-size: 18px">Personal Details</h2>

              <div class="details-section">
                <label for="personal-full-name"
                  >Full Name (As per Aadhaar Card)</label
                >
                <input
                  type="text"
                  id="personal-full-name"
                  name="full-name"
                  placeholder="Enter Full Name"
                  required
                />
              </div>
            </div>

            <div class="form-section">
              <h2 style="font-size: 18px">Contact Details</h2>

              <div class="details-section">
                <label for="mobile-number">Mobile Number</label>
                <div style="margin-bottom: 5px"></div>

                <input
                  type="tel"
                  id="mobile-number"
                  name="mobile-number"
                  placeholder="Enter 10-digit Mobile Number"
                  pattern="[0-9]{10}"
                  maxlength="10"
                  required
                />

                <label for="email-id">Email ID</label>
                <div style="margin-bottom: 5px"></div>

                <input
                  type="email"
                  id="email-id"
                  name="email-id"
                  placeholder="Enter Email ID"
                  required
                />
              </div>
            </div>

            <div class="container" style="margin-top: 20px">
              <p
                style="
                  font-size: 16px;
                  color: #0a3c59;
                  text-align: center;
                  font-weight: 600;
                "
              >
                Send the following documents via WhatsApp:
              </p>
              <ul style="color: #0a3c59; margin-left: 25px; font-size: 15px">
                <li>Aadhar Card</li>
                <li>Your Signature on white paper</li>
                <li>Passport size photo</li>
                <li>Class 10th & 12th documents (Reg/Admit/Mark/Cert.)</li>
              </ul>

              <div style="text-align: center; margin: 15px 0">
                <a
                  href="https://wa.me/918902709631?text=Hi, I submitted my College Admission request. Sending my documents."
                  target="_blank"
                >
                  <button
                    type="button"
                    style="
                      padding: 10px 25px;
                      background-color: #25d366;
                      color: white;
                      border: none;
                      border-radius: 8px;
                      font-size: 16px;
                      cursor: pointer;
                    "
                  >
                    üì§ Send Documents via WhatsApp
                  </button>
                </a>
              </div>

              <label
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  font-size: 15px;
                  margin-top: 10px;
                "
              >
                <input type="checkbox" id="document-confirm" required />
                I confirm that I have sent all the required documents via
                WhatsApp.
              </label>
            </div>
            
            <div class="submit-container">
              <button type="submit">Submit</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <script src="../js/popup.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDI8FxDlILMR93AD69_E48qwMKJuSUqFXg",
        authDomain: "digital-solutions-ae7ad.firebaseapp.com",
        databaseURL:
          "https://digital-solutions-ae7ad-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "digital-solutions-ae7ad",
        storageBucket: "digital-solutions-ae7ad.appspot.com",
        messagingSenderId: "761041929019",
        appId: "1:761041929019:web:d228c928c6bd40ea4fed1e",
      };

      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();

      document
        .getElementById("college-admission-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          // ** ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá **
          const documentConfirmCheckbox =
            document.getElementById("document-confirm");

          const personalFullName =
            document.getElementById("personal-full-name").value;

          const mobileNumber = document.getElementById("mobile-number").value;
          const emailId = document.getElementById("email-id").value;

          if (!documentConfirmCheckbox.checked) {
            alert(
              "‚ùó Please confirm that you have sent all required documents via WhatsApp before submitting."
            );
            return;
          }

          // ** Changes to save data by date **
          const today = new Date().toISOString().split("T")[0]; // yyyy-mm-dd

          // ** ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶°‡ßá‡¶ü‡¶æ Firebase-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá **
          const formData = {
            personalDetails: {
              fullName: personalFullName,
            },
            contactDetails: {
              mobile: mobileNumber,
              email: emailId,
            },
            timestamp: new Date().toISOString(),
            documentsSent: true,
          };

          database
            .ref("collegeAdmissionRequests/" + today)
            .push(formData)
            .then(() => {
              document.getElementById("college-admission-form").reset();
              documentConfirmCheckbox.checked = false;

              showPopup(
                "‚úÖ Submission Successful",
                "We have received your request. Our team will call you shortly for further process. keep your phone turned on and nearby."
              );
            })
            .catch((error) => {
              alert("‚ùå Error: " + error.message);
            });
        });
    </script>

    <script src="../js/slider.js"></script>
  </body>
</html>
